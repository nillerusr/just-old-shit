name: Build libs

on:
  push:
    branches:
      - "*"
  pull_request:
    branches:
      - "*"

jobs:
  build-episodic:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Build episodic
      env:
        DISCORD_TOKEN: ${{ secrets.DISCORD_TOKEN }}
        SSH_PASS: ${{ secrets.SSH_PASS }}
      run: |
        ./deploy.sh episodic 1.01 "Half-Life 2 EP1,2"

  build-hl2mp:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Build hl2mp
      env:
        DISCORD_TOKEN: ${{ secrets.DISCORD_TOKEN }}
        SSH_PASS: ${{ secrets.SSH_PASS }}
      run: |
        ./deploy.sh hl2mp 1.01 "Half-Life 2: Deathmatch" extras_dir.vpk 1

  build-hl1:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Build hl1
      env:
        DISCORD_TOKEN: ${{ secrets.DISCORD_TOKEN }}
        SSH_PASS: ${{ secrets.SSH_PASS }}
      run: |
        ./deploy.sh hl1 1.01 "Half-Life: Source"

  build-cstrike:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Build cstrike
      env:
        DISCORD_TOKEN: ${{ secrets.DISCORD_TOKEN }}
        SSH_PASS: ${{ secrets.SSH_PASS }}
      run: |
        ./deploy.sh cstrike 1.04 "Counter-Strike: Source" extras_dir.vpk 5

  build-portal:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Build portal
      env:
        DISCORD_TOKEN: ${{ secrets.DISCORD_TOKEN }}
        SSH_PASS: ${{ secrets.SSH_PASS }}
      run: |
        ./deploy.sh portal 1.00 "Portal"

  build-dod:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Build DoD
      env:
        DISCORD_TOKEN: ${{ secrets.DISCORD_TOKEN }}
        SSH_PASS: ${{ secrets.SSH_PASS }}
      run: |
        ./deploy.sh dod 1.01 "Day of Defeat"
